#!/bin/bash

NUM_PROCESSES=$EU_PRJ_LOCAL_DEFAULT_NUM_PROCESSES
IS_RERUN=False
RUN_REPETITION_SCRIPT=$EU_PRJ_DEFAULT_RUN_REPETITION_SCRIPT

while getopts ":n:r" arg; do
  case $arg in
    n) NUM_PROCESSES=$OPTARG;;
    r) IS_RERUN=True;;
  esac
done

echo "Start experiments ..."
python -c "import exputils

exputils.manage.generate_experiment_files('experiment_configurations.ods', directory='./experiments/')

exputils.manage.start_experiments(
  start_scripts='$RUN_REPETITION_SCRIPT',
  parallel=$NUM_PROCESSES,
  is_chdir=True,
  verbose=False,
  is_rerun=$IS_RERUN)"

echo "Finished"