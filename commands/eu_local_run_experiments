#!/usr/bin/env bash

NUM_PROCESSES=$EU_PRJ_LOCAL_DEFAULT_NUM_PROCESSES
RUN_REPETITION_SCRIPT=$EU_PRJ_DEFAULT_RUN_REPETITION_SCRIPT

while getopts ":n:" arg; do
  case $arg in
    n) NUM_PROCESSES=$OPTARG;;
  esac
done

echo "Start experiments ..."
python -c "import exputils

exputils.manage.generate_experiment_files('experiment_configurations.ods', directory='./experiments/')

exputils.manage.start_experiments(
  start_scripts='$RUN_REPETITION_SCRIPT',
  parallel=$NUM_PROCESSES)"

echo "Finished"
